import os, tables, strformat, base64, ospaths

var assets = initTable[string, string]()

proc getAsset*(path: string): string = 
  result = assets[path].decode()

assets.add("public/index.js",  """d2luZG93Lm9ubG9hZCA9IGZ1bmN0aW9uKCkgewogIGNvbnN0IHdzUHJvdG9jb2wgPSBsb2NhdGlvbi5wcm90b2NvbCA9PT0gImh0dHBzOiIgPyAid3NzIiA6ICJ3cyI7CiAgY29uc3Qgd3NVcmwgPSBgJHt3c1Byb3RvY29sfTovLyR7d2luZG93LmxvY2F0aW9uLmhvc3R9L3dzYDsKICBsZXQgd3NJbnN0YW5jZSA9IGNyZWF0ZVdzKCk7CiAgbGV0IHJlc2V0SW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PgogIHsKICAgIGlmICh3c0luc3RhbmNlICYmIHdzSW5zdGFuY2UucmVhZHlTdGF0ZSA+IDEpIHsKICAgICAgd3NJbnN0YW5jZSA9IGNyZWF0ZVdzKCk7CiAgICB9CiAgfSwgNTAwMCk7CgoKICBmdW5jdGlvbiBjcmVhdGVXcygpIHsKICAgIGNvbnN0IHN1cHBvcnRlZFByb3RvY29sID0gIlJFRlJFU0giOwogICAgY29uc3Qgd3MgPSBuZXcgV2ViU29ja2V0KHdzVXJsLCBzdXBwb3J0ZWRQcm90b2NvbCk7CiAgICBsZXQgcGluZ0ludDsKCiAgICB3cy5vbm9wZW4gPSAoKSA9PiB7CiAgICAgIGlmICh3cy5wcm90b2NvbCAhPT0gc3VwcG9ydGVkUHJvdG9jb2wpIHsKICAgICAgICBjb25zb2xlLmVycm9yKGBCYWQgcHJvdG9jb2wuIENsaWVudCBzdXBwb3J0cyAke3N1cHBvcnRlZFByb3RvY29sfSBidXQgZ290OiAke3dzLnByb3RvY29sfWApOwogICAgICAgIHdzLmNsb3NlKDMwMDIpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgY29uc29sZS5sb2coIldlYlNvY2tldCBvcGVuZWQiKTsKICAgICAgcGluZ0ludCA9IHNldEludGVydmFsKGZ1bmN0aW9uKCkgewogICAgICAgIGlmICh3cy5yZWFkeVN0YXRlID4gMSkgewogICAgICAgICAgY2xlYXJJbnRlcnZhbChwaW5nSW50KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29uc29sZS5kZWJ1ZygiUElORyIpOwogICAgICAgICAgd3Muc2VuZCgiUElORyIpOwogICAgICAgIH0KICAgICAgfSwgMjAwMCk7CiAgICB9CgogICAgd3Mub25jbG9zZSA9IGV2ZW50ID0+IGNvbnNvbGUud2FybihgV2ViU29ja2V0IGNsb3NlZCBvbiAke3dzVXJsfWAsIGV2ZW50KTsKCiAgICB3cy5vbm1lc3NhZ2UgPSBtc2cgPT4gewogICAgICBjb25zdCBkYXRhID0gbXNnLmRhdGE7CgogICAgICBzd2l0Y2goZGF0YSkgewogICAgICAgIGNhc2UgIkhFTExPIjoKICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAiUkVGUkVTSCI6CiAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTsKICAgICAgICAgIHdzLmNsb3NlKDEwMDAsIGRhdGEpOwogICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7CiAgICAgICAgICBicmVhazsKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgY29uc29sZS53YXJuKGBVbmFibGUgdG8gaGFuZGxlIG1lc3NhZ2U6ICIke2RhdGF9ImAsIG1zZyk7CiAgICAgIH0KICAgIH07CgogICAgcmV0dXJuIHdzOwogIH0KfQo=""" )

assets.add("public/style.css",  """Ym9keSB7CiAgZm9udC1mYW1pbHk6IG1vbm9zcGFjZTsKfQoKLmhhbGYtaW5uZXIgewogIHBhZGRpbmc6IDIwcHg7CiAgdGV4dC1hbGlnbjogY2VudGVyOwogIG1hcmdpbi10b3A6IDI1dmg7Cn0KCi5tYWluLXdyYXBwZXIgewogIGRpc3BsYXk6IGZsZXg7Cn0KCi5oYWxmIHsKICBmbGV4OiAwIDAgNTAlOwogIGhlaWdodDogMTAwdmg7Cn0KCi5oYWxmLmlzLW9uLWNhbGwgewogIGJhY2tncm91bmQtY29sb3I6ICNGRjQxMzY7Cn0KCi5oYWxmOm5vdCguaXMtb24tY2FsbCkgewogIGJhY2tncm91bmQtY29sb3I6ICMwMUZGNzA7CiAgb3BhY2l0eTogMC40Owp9CgpkZXRhaWxzIHsKICBtYXJnaW4tdG9wOiAxMDBweDsKfQoKc3VtbWFyeSB7CiAgZm9udC1zaXplOiAyMHB0OwogIGNvbG9yOiAjMjIyOwp9CgpidXR0b24gewogIG1hcmdpbi10b3A6IDIwcHg7CiAgZm9udC1zaXplOiAxNHB0OwogIHBhZGRpbmc6IDMwcHggMTAwcHg7Cn0KCmgxIHsKICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgbWFyZ2luOiAxNXB4OwogIHdpZHRoOiA4MCU7CiAgZm9udC1zaXplOiAxMDBwdDsKICBmb250LXdlaWdodDogMjAwOwp9Cg==""" )

